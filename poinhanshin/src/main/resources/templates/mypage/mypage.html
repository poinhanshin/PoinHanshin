<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout}">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" script type="text/css" href="/css/mypage/mypage.css"></script>
</head>
<body layout:fragment="content">
    <div class="container">
        <div class="container-fluid">
            <div class="row">
                <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                    <div class="position-sticky pt-3 sidebar-sticky">
                        <ul class="nav flex-column">
                            <div class="profile_m">
                            <li class="nav-item">
                                <img src="/img/user.png" class="profile-image">
                                <span class="profile-label d-flex justify-content-center my-2" th:if="${loginUser!=null}" th:text="${loginUser.id}">프로필</span>
                                <span class="profile-label d-flex justify-content-center my-2" th:unless="${loginUser!=null}" th:text="'프로필'">프로필</span>

                        <div class="container">
                                <!-- "회원정보조회" 버튼 -->
                            <a href="/profilePage" style="text-decoration: none; color: gray;">회원정보조회</a>
                        </div>
                            <div class="container my-2">
                                <!-- "탈퇴하기" 버튼 -->
                                <form id="form"action="/dismiss" method="post">
                                    <input type="button" value="탈퇴하기" id="submitBtn"style="border: none; background: none; color: red; margin: 0">

                                </form>
                            </div>
                            </li>
                            </div>
                            <li class="nav-item-1">
                                <a class="nav-link active" aria-current="page" id="myPost" href="/myWrittenPage">
                                    <span data-feather="home" class="align-text-bottom"></span>
                                    내가 작성 한 글
                                </a>
                            </li>
                            <li class="nav-item" style="margin-top: 0.5em;">
                                <a class="nav-link" id="boardFav" href="/forumBookmark">
                                    <span data-feather="file" class="align-text-bottom"></span>
                                    게시판 즐겨찾기
                                </a>
                            </li>
                            <li class="nav-item" style="margin-top: 0.5em;">
                                <a class="nav-link" id="rescueFav" href="/temporaryBookmark">
                                    <span data-feather="shopping-cart" class="align-text-bottom"></span>
                                    임보자 공고 즐겨찾기
                                </a>
                            </li>
                            <li class="nav-item" style="margin-top: 0.5em;">
                                <a class="nav-link" id="findmapFav" href="/mapBookmark">
                                    <span data-feather="users" class="align-text-bottom"></span>
                                    실종/발견 지도 즐겨찾기
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>

<!--                메인내용-->

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" id="mainContent">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">마이페이지</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </div>
                </div>

                <h2></h2>
                <div class="gallery-container">
                    <ul class="image-gallery">
                        <li><img src="/img/myback.png" alt="Image 1" style="opacity: 0.4"></li>
                        <li><img src="/img/myback.png" alt="Image 2" style="opacity: 0.6"></li>
                        <li><img src="/img/myback.png" alt="Image 3" style="opacity: 0.8"></li>
                        <li><img src="/img/myback.png" alt="Image 4"></li>
                    </ul>
                </div>
            </main>
    </div>
    </div>
    </div>

    <script>
        alert("테스트");
        $('#submitBtn').on("click",function(){
            if(!confirm("탈퇴하시겠습니까 ?")) {
                //event.preventDefault()
                return;
            }
            let form = $('#form');
            form.submit();
        });

    </script>
<script>
    /*// "회원정보수정" 버튼 클릭 시 메인 컨텐츠 변경
    document.getElementById('profileBtn').addEventListener('click', function () {
        // AJAX를 사용하여 profile.html 파일을 가져옵니다.
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'profile.html', true);

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // AJAX 요청이 성공하면 응답 데이터를 가져옵니다.
                var profileHtml = xhr.responseText + '<button onclick="go()">회원정보 수정</button>';

                // 메인 컨텐츠에 profile.html의 내용을 삽입합니다.
                document.getElementById('mainContent').innerHTML = profileHtml;
            }
        };

        xhr.send();
    });

    // "회원정보수정" 버튼 클릭 시 메인 컨텐츠 변경
    document.getElementById('profileBtn').addEventListener('click', function () {
        // 새로운 메인 컨텐츠 내용을 생성하거나 가져옵니다.

        var newContent = '<button onclick="go()" ">수정하기</button>';

        // 기존 메인 컨텐츠를 교체합니다.
        document.getElementById('mainContent').innerHTML = newContent;
    });

    function go() {
        location.href="profedit.html";
    }

        // "탈퇴하기" 버튼 클릭 시 경고 창 표시
        document.getElementById('withdrawBtn').addEventListener('click', function () {
            var confirmWithdraw = confirm('탈퇴하시겠습니까?');

            if (confirmWithdraw) {
                // 사용자가 "네"를 선택한 경우
                // 탈퇴 처리를 수행하세요.
                alert('탈퇴가 완료되었습니다.');
            } else {
                // 사용자가 "취소"를 선택한 경우
                alert('탈퇴가 취소되었습니다.');
            }
        });

    // 돌아가기 버튼 클릭 시 브라우저 이전 페이지로 이동
    function goBack() {
        location.href="mypage.html";
    }*/
    </script>
</body>
</html>